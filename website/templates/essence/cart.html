{% extends 'base.html' %} {% block title %}
  Cart
{% endblock %}
{% load static %} {% block content %}
  {% include 'components/ui/header.html' %}
  {% include 'components/ui/Breadcrumb.html' with title='Cart' active='Cart' %}
  {% include 'components/ui/sidebar.html' %}

  <!-- Cart section -->
  <section class="gi-cart-section py-[40px] max-[767px]:py-[30px]">
    <h2 class="hidden">Cart Page</h2>
    <div class="flex flex-wrap justify-between items-center mx-auto min-[1600px]:max-w-[1600px] min-[1400px]:max-w-[1320px] min-[1200px]:max-w-[1140px] min-[992px]:max-w-[960px] min-[768px]:max-w-[720px] min-[576px]:max-w-[540px] relative">
      <form action="{% url 'essence:save_checkout_info' %}" method="POST" class="flex flex-wrap w-full">
        {% csrf_token %}
        <!-- Sidebar Area Start -->
        <div class="gi-cart-rightside min-[992px]:w-[33.33%] w-full px-[12px]">
          <div class="gi-sidebar-wrap p-[15px] rounded-[5px] border-[1px] border-solid border-[#eee] mb-[0]">
            <!-- Sidebar Summary Block -->
            <div class="gi-sidebar-block">
              <div class="gi-sb-title">
                <h3 class="gi-sidebar-title text-[20px] font-semibold tracking-[0] mb-[0] leading-[1.2] relative text-[#4b5966] max-[1199px]:text-[18px]">Summary</h3>
              </div>
              <div class="gi-sb-block-content mb-[0] border-b-[0] mt-[15px]">
                <h4 class="gi-ship-title mb-[0] text-[17px] font-bold tracking-[0] leading-[1.2] border-b-[1px] border-solid border-[#eee] text-[#777] pb-[15px] relative flex items-center justify-between">Estimate Shipping</h4>
                <div class="gi-cart-form pt-[19px]">
                  <p class="text-[#777] text-[14px] mb-[10px] tracking-[0] leading-[28px] font-light">Enter your destination to get a shipping estimate</p>
                  <div class="mb-[28px]">
                    <label for="full_name" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">Full Name *</label>
                    <input type="text" name="full_name" placeholder="Full Name" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                    <!-- Email -->
                    <div class="mb-[28px]">
                      <label for="email" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">Email *</label>
                      <input type="email" name="email" id="email" placeholder="Email" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                    </div>

                    <!-- Mobile -->
                    <div class="mb-[28px]">
                      <label for="mobile" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">Mobile *</label>
                      <input type="tel" name="mobile" id="mobile" placeholder="Mobile" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                    </div>

                    <!-- Address -->
                    <div class="mb-[28px]">
                      <label for="address" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">Address *</label>
                      <input type="text" name="address" id="address" placeholder="Address" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                    </div>

                    <!-- City -->
                    <div class="mb-[28px]">
                      <label for="city" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">City *</label>
                      <input type="text" name="city" id="city" placeholder="City" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                    </div>

                    <!-- State -->
                    <div class="mb-[28px]">
                      <label for="state" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">State *</label>
                      <input type="text" name="state" id="state" placeholder="State" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                    </div>

                    <!-- Country -->
                    <div class="mb-[28px]">
                      <label for="country" class="mb-[9px] text-[#4b5966] text-[14px] font-medium tracking-[0] leading-[1] inline-block">Country *</label>
                      <input type="text" name="country" id="country" placeholder="Country" class="h-[50px] bg-transparent border-[1px] border-solid border-[#eee] text-[#4b5966] text-[14px] px-[15px] w-full outline-[0] rounded-[5px]" required />
                    </div>
                  </div>
                </div>
              </div>
              <div class="gi-sb-block-content mb-[0] border-b-[0] mt-[15px]">
                <div class="gi-cart-summary-bottom">
                  {% if cart_data.all_total_amount %}
                    <div class="gi-checkout-summary">
                      <div class="flex justify-between items-center mb-[10px]">
                        <span class="text-left text-[#777] text-[14px] leading-[24px] tracking-[0]">Sub-Total</span>
                        <span id="subtotal" class="text-right text-[#4b5966] text-[15px] leading-[24px] font-medium">${{ cart_data.all_total_amount }}</span>
                      </div>
                      <div class="flex justify-between items-center mb-[10px]">
                        <span class="text-left text-[#777] text-[14px] leading-[24px] tracking-[0]">Delivery Charges</span>
                        <span id="delivery-charge" class="text-right text-[#4b5966] text-[15px] leading-[24px] font-medium"></span>
                      </div>
                      <div class="gi-checkout-summary-total border-t-[1px] border-solid border-[#eee] pt-[19px] mb-[0] mt-[16px] flex justify-between items-center">
                        <span class="text-left text-[16px] font-semibold text-[#4b5966] tracking-[0] font-manrope">Total Amount</span>
                        <span id="total-amount" class="text-right text-[16px] font-semibold text-[#4b5966] font-manrope"></span>
                      </div>
                    </div>
                  {% endif %}

                  <script>
                    const subtotal = parseFloat('{{ cart_data.all_total_amount }}')
                    const deliveryCharge = (subtotal * 0.05).toFixed(2)
                    const totalAmount = (subtotal + parseFloat(deliveryCharge)).toFixed(2)
                    
                    document.getElementById('delivery-charge').textContent = `$${deliveryCharge}`
                    document.getElementById('total-amount').textContent = `$${totalAmount}`
                  </script>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="gi-cart-leftside min-[992px]:w-[66.66%] w-full px-[12px] max-[991px]:mt-[30px]">
          <!-- cart content Start -->
          <div class="gi-cart-content">
            <div class="gi-cart-inner">
              <div class="flex flex-wrap w-full">
                <div class="w-full">
                  {% if cart_data.all_total_amount %}
                    <div class="table-content cart-table-content">
                      <table class="w-full bg-[#fff]">
                        <thead class="max-[767px]:border-[0] max-[767px]:h-[1px] max-[767px]:m-[-1px] max-[767px]:overflow-hidden max-[767px]:p-[0] max-[767px]:absolute max-[767px]:w-[1px]">
                          <tr class="bg-[#fff] border-b-[2px] border-solid border-[#eee]">
                            <th class="text-[#4b5966] text-[15px] font-medium pt-[15px] pb-[12px] px-[14px] text-left capitalize align-middle whitespace-nowrap leading-[1] tracking-[0]">Product</th>
                            <th class="text-[#4b5966] text-[15px] font-medium pt-[15px] pb-[12px] px-[14px] text-left capitalize align-middle whitespace-nowrap leading-[1] tracking-[0]">Price</th>
                            <th class="text-[#4b5966] text-[15px] font-medium pt-[15px] pb-[12px] px-[14px] text-center capitalize align-middle whitespace-nowrap leading-[1] tracking-[0]">Quantity</th>
                            <th class="text-[#4b5966] text-[15px] font-medium pt-[15px] pb-[12px] px-[14px] text-left capitalize align-middle whitespace-nowrap leading-[1] tracking-[0]">Total</th>
                            <th></th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for item in cart_data.product_details %}
                            <tr class="border-b-[1px] border-solid border-[#eee] max-[767px]:border-[1px] max-[767px]:block max-[767px]:mb-[15px]">
                              <td data-label="{{ item.title }}" class="gi-cart-pro-name w-[40%] text-[#4b5966] text-[16px] py-[15px] px-[14px] text-left max-[767px]:w-full max-[767px]:border-b-[1px] max-[767px]:border-solid max-[767px]:border-[#eee] max-[767px]:flex max-[767px]:justify-between max-[767px]:items-center max-[767px]:text-[14px] max-[767px]:py-[8px] max-[767px]:px-[10px]">
                                <a href="{% url 'essence:product-detail' item.pid %}" class="text-[#777] font-normal text-[14px] flex leading-[1.5] tracking-[0.6px] items-center"><img class="gi-cart-pro-img w-[60px] mr-[15px]" src="{{ item.images }}" alt="" />{{ item.title }}</a>
                              </td>
                              <td data-label="Price" class="gi-cart-pro-price text-[#4b5966] font-medium text-[15px] py-[15px] px-[14px] text-left max-[767px]:border-b-[1px] max-[767px]:border-solid max-[767px]:border-[#eee] max-[767px]:flex max-[767px]:justify-between max-[767px]:items-center max-[767px]:text-[14px] max-[767px]:py-[8px] max-[767px]:px-[10px]">
                                <span class="amount tracking-[0.02rem]">${{ item.price }}</span>
                              </td>
                              <td data-label="Quantity" class="gi-cart-pro-qty text-[#4b5966] text-[16px] py-[15px] px-[14px] text-center max-[767px]:border-b-[1px] max-[767px]:border-solid max-[767px]:border-[#eee] max-[767px]:flex max-[767px]:justify-between max-[767px]:items-center max-[767px]:text-[14px] max-[767px]:py-[8px] max-[767px]:px-[10px]">
                                <div class="cart-qty-plus-minus border-[1px] border-solid border-[#eee] rounded-[5px] h-[35px] overflow-hidden p-[0] relative w-[84px] flex items-center justify-between my-[0] mx-auto max-[767px]:m-[0]">
                                  <input class="cart-plus-minus border-[0] text-[#4b5966] float-left text-[14px] h-auto m-[0] p-[0] text-center w-[40px] outline-[0] leading-[38px] font-semibold" type="number" name="" value="{{ item.qty }}" />
                                </div>
                              </td>
                              <td data-label="Total" class="gi-cart-pro-subtotal text-[#4b5966] text-[15px] font-medium py-[15px] px-[14px] text-left max-[767px]:border-b-[1px] max-[767px]:border-solid max-[767px]:border-[#eee] max-[767px]:flex max-[767px]:justify-between max-[767px]:items-center max-[767px]:text-[14px] max-[767px]:py-[8px] max-[767px]:px-[10px]">${{ item.product_by_amount }}</td>
                              <td data-label="Remove" class="gi-cart-pro-remove text-[#4b5966] w-[90px] text-[16px] py-[15px] px-[14px] text-right max-[767px]:border-b-[1px] max-[767px]:border-solid max-[767px]:border-[#eee] max-[767px]:flex max-[767px]:justify-between max-[767px]:items-center max-[767px]:text-[14px] max-[767px]:py-[8px] max-[767px]:px-[10px]">
                                <button class="remove text-[22px] my-[0] mx-auto" data-product="{{ item.product_id }}"><i class="gicon gi-trash-o"></i></button>
                              </td>
                            </tr>
                          {% endfor %}
                        </tbody>
                      </table>
                    </div>
                  {% endif %}
                  <div class="flex flex-wrap">
                    <div class="w-full">
                      <div class="gi-cart-update-bottom pt-[30px] flex justify-between">
                        <a href="{% url 'essence:product-list' %}" class="text-[#4b5966] inline-block underline text-[15px] leading-[20px] font-medium tracking-[0.8px]">Continue Shopping</a>
                        <button type="submit" class="gi-btn-2 transition-all duration-[0.3s] ease-in-out overflow-hidden text-center relative rounded-[5px] py-[10px] max-[767px]:py-[6px] px-[15px] max-[767px]:px-[10px] bg-[#5caf90] text-[#fff] border-[0] text-[14px] max-[767px]:text-[13px] tracking-[0] font-medium inline-flex items-center hover:bg-[#4b5966] hover:text-[#fff]">Check Out</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- cart content End -->
        </div>
      </form>
    </div>
  </section>
  <!-- Cart section End -->

  {% include 'components/ui/footer.html' %}
  {% include 'components/ui/quickmodel.html' %}
{% endblock %}
